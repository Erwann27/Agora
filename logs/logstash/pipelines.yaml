input {
  file {
    type => "caddy_access"
    path => "/var/log/caddy/agora_access.log"
    start_position => beginning
  }
  file {
    type => "symfony_gametest"
    path => "/var/log/symfony/gametest.log"
    start_position => beginning
  }
  file {
    type => "mercure_access"
    path => "/var/log/mercure/mercure-access.log"
    start_position => beginning
  }
}

filter {
  if [type] == "caddy_access" {
    
  }
  else if [type] in ["symfony_gametest"] {
    grok {
      patterns_dir => ["/etc/logstash/conf.d/patterns"]
      match => { "message" => "%{SYMFONY}"}
    }
  }
  else if [type] == "mercure_access" {
    
  }
}


output {
  elasticsearch {
    hosts => "http://elasticsearch:9200"
    index => "logstash-local-dev-%{+YYYY.MM.dd}"
    user => "elastic"
    password => "changeme"
  }
}