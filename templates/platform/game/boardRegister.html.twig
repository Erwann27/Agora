{% extends 'platform/base.html.twig' %}

{% block title %}
	Accueil
{% endblock %}

{% block body %}
	<header class="relative isolate px-6 pt-14 lg:px-8">
		<div class="absolute inset-x-0 -top-40 -z-10 transform-gpu overflow-hidden blur-3xl sm:-top-80" aria-hidden="true">
			<div class="relative left-[calc(50%-11rem)] aspect-[1155/678] w-[36.125rem] -translate-x-1/2 rotate-[30deg] bg-gradient-to-tr from-danger to-primary opacity-30 sm:left-[calc(50%-30rem)] sm:w-[72.1875rem]" style="clip-path: polygon(74.1% 44.1%, 100% 61.6%, 97.5% 26.9%, 85.5% 0.1%, 80.7% 2%, 72.5% 32.5%, 60.2% 62.4%, 52.4% 68.1%, 47.5% 58.3%, 45.2% 34.5%, 27.5% 76.7%, 0.1% 64.9%, 17.9% 100%, 27.6% 76.8%, 76.1% 97.7%, 74.1% 44.1%)"></div>
		</div>

		<div class="relative isolate flex flex-col justify-end overflow-hidden rounded-2xl bg-gray-900 px-8 pb-8 pt-80 sm:pt-48 lg:pt-80">
			<img src="https://images.unsplash.com/photo-1597764894768-df73d7fde605?q=80&w=3870&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt=""
				 class="absolute inset-0 -z-10 h-full w-full object-cover">
			<div class="absolute inset-0 -z-10 bg-gradient-to-t from-gray-900 via-gray-900/40"></div>
			<div class="absolute inset-0 -z-10 rounded-2xl ring-1 ring-inset ring-gray-900/10"></div>
			<h3 class=" text-lg font-semibold leading-6 text-white">
				Nouvelle Table - {{ game.name }}
			</h3>
		</div>


		<div class="space-y-12 max-w-6xl">
			{{ form_start(form) }}

			<div class="mt-10 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-2">
				<div>
					{{ form_label(form.nbUserMax, 'Nombre de joueur', { 'label_attr': {
						'class': 'block text-sm font-medium leading-6 text-gray-900'
					}}) }}
					<div class="mt-2">
						{{ form_widget(form.nbUserMax, {'id': 'nbUsers', 'attr': {
							'class': 'block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-primary sm:text-sm sm:leading-6'
						}}) }}
					</div>
				</div>

				<div>
					{{ form_label(form.nbInvitations, 'Nombre de place réservé', {'label_attr': {
						'class': 'block text-sm font-medium leading-6 text-gray-900'
					}}) }}
					<div class="mt-2">
						{{ form_widget(form.nbInvitations, { 'id': 'nbInvitations','attr': {
							'class': 'block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-primary sm:text-sm sm:leading-6'
						}}) }}
					</div>
				</div>

				<div class="flex items-center">
					<div class="leading-6">
						<label for="inactivityCheck" class="font-medium text-gray-900">définir le temps de jeu max ?
							<p class="text-sm text-gray-600">Permet de définir le temps de jeu maximum avant l'expulsion d'un joueur.</p>
						</label>

					</div>
					<input id="inactivityCheck" name="inactivityCheck" type="checkbox" class="mt-2 mx-5 rounded border-gray-300 text-primary focus:ring-primary">
				</div>

				<div id="inactivityFrom" class="hidden">
					<label for="inactivity" class="block font-medium leading-6 text-gray-900">Temps d'inactivité (en heures, entre 24 et 168)</label>
					<div class="relative mt-2 rounded-md shadow-sm">
						{{ form_widget(form.inactivityHours, {'attr': {
							'class': 'block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-primary sm:text-sm sm:leading-6'
						}}) }}
					</div>
				</div>

				<div class="hidden">
					{{ form_rest(form) }}
				</div>

				<div class="sm:col-span-2 flex justify-end">
					<button type="submit" class="w-full sm:max-w-xs justify-center rounded-md bg-primary px-3 py-1.5 text-sm font-semibold leading-6 text-white shadow-sm hover:bg-blue-400 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600">Creer une table</button>
				</div>
			</div>

			{{ form_end(form) }}

			<div class="absolute inset-x-0 top-[calc(100%-13rem)] -z-10 transform-gpu overflow-hidden blur-3xl sm:top-[calc(100%-30rem)]" aria-hidden="true">
				<div class="relative left-[calc(50%+3rem)] aspect-[1155/678] w-[36.125rem] -translate-x-1/2 bg-gradient-to-tr from-primary to-danger opacity-30 sm:left-[calc(50%+36rem)] sm:w-[72.1875rem]" style="clip-path: polygon(74.1% 44.1%, 100% 61.6%, 97.5% 26.9%, 85.5% 0.1%, 80.7% 2%, 72.5% 32.5%, 60.2% 62.4%, 52.4% 68.1%, 47.5% 58.3%, 45.2% 34.5%, 27.5% 76.7%, 0.1% 64.9%, 17.9% 100%, 27.6% 76.8%, 76.1% 97.7%, 74.1% 44.1%)"></div>
			</div>
		</div>
	</header>

	<script>
		document.addEventListener('DOMContentLoaded', function() {
			const checkbox = document.getElementById('inactivityCheck');
			const champPersonnalisable = document.getElementById('inactivityFrom');
			const nbUsers = document.getElementById('nbUsers');
			const nbInvitations = document.getElementById('nbInvitations');

			//Change the options of nbInvitation depending on the selected value in nbUsers
			function dynamicNbInvitations(){
				var selectedValue = parseInt(nbUsers.value); // Récupérer la valeur sélectionnée et convertir en entier
				nbInvitations.innerHTML="";

				for (var i = 0; i < selectedValue; i++) {
					var option = document.createElement('option');
					option.value = i;
					option.textContent = i;
					nbInvitations.appendChild(option);
				}
			}
			//Initialize the nbInvitations select input
			dynamicNbInvitations();

			nbUsers.addEventListener('change',dynamicNbInvitations);

			checkbox.addEventListener('change', function() {
				if (checkbox.checked) {
					champPersonnalisable.classList.remove('hidden');
				} else {
					champPersonnalisable.classList.add('hidden');
				}
			});
		});
	</script>

{% endblock %}
